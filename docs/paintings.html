<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Art Store — Картины</title>
<link rel="stylesheet" href="static/css/style.css">
<style>
  .sections {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    justify-content: center;
  }
  .section-card {
    width: 220px;
    border: 1px solid #ddd;
    padding: 12px;
    text-align: center;
    border-radius: 8px;
    transition: transform 0.2s ease;
    background: #fff;
  }
  .section-card img {
    width: 100%;
    height: 150px;
    object-fit: cover;
    border-radius: 6px;
  }
  .section-card h2 {
    font-size: 18px;
    margin: 10px 0 6px;
  }
  .section-card p {
    font-size: 14px;
    color: #555;
    min-height: 40px;
  }
  .qty-btn {
    padding: 6px 12px;
    background-color: #FFC107;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-weight: 600;
  }
  .qty-btn:hover {
    background-color: #FFDB4D;
  }
</style>
</head>
<body>

<header class="site-header">
  <a class="brand" href="index.html">Art Store</a>
  <nav class="main-nav">
    <a href="index.html">Главная</a>
    <div class="dropdown">
      <a href="#">Магазин</a>
      <div class="dropdown-content">
        <a href="paintings.html">Картины</a>
        <a href="sculptures.html">Скульптуры</a>
        <a href="rarities.html">Раритет</a>
        <a href="coins.html">Монеты</a>
      </div>
    </div>
    <a href="cart.html">Корзина <span class="badge" id="cart-count">0</span></a>
    <a href="contact.html">Контакты</a>
  </nav>
</header>

<main class="container">
  <h1>Картины</h1>
  <p>Эксклюзивные картины для вашего интерьера и коллекции.</p>

  <div class="sections" id="paintings-list">
    <!-- сюда загрузятся товары из Firebase -->
  </div>
</main>

<div class="site-footer-wrapper">
  <footer class="site-footer">© 2025 Art Store — Corporation VA</footer>
</div>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
  // ===== Firebase =====
  const firebaseConfig = {
    apiKey: "AIzaSyDgymi8tGWcLsowq8cPYZUcG3xCk2CbG2E",
    authDomain: "artstore-e9610.firebaseapp.com",
    projectId: "artstore-e9610",
    storageBucket: "artstore-e9610.appspot.com",
    messagingSenderId: "116819253020",
    appId: "1:116819253020:web:a4860eb14a7beef637ccd9"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  const paintingsList = document.getElementById('paintings-list');

  // ===== Загрузка картин =====
  async function loadPaintings() {
    try {
      const snapshot = await db.collection("products")
                               .where("category", "==", "картины")
                               .get();

      paintingsList.innerHTML = "";

      if (snapshot.empty) {
        paintingsList.innerHTML = "<p>Картины пока не добавлены.</p>";
      }

      snapshot.forEach(doc => {
        const product = doc.data();
        const card = document.createElement('div');
        card.className = "section-card";
        card.innerHTML = `
          <img src="${product.imageURL}" alt="${product.name}">
          <h2>${product.name}</h2>
          <p>${product.description}</p>
          <p><strong>Цена: ${product.price}€</strong></p>
          <button class="qty-btn" onclick="addToCart('${doc.id}')">Добавить в корзину</button>
        `;
        paintingsList.appendChild(card);
      });
    } catch (err) {
      console.error("Ошибка загрузки картин:", err);
      paintingsList.innerHTML = "<p>Не удалось загрузить товары.</p>";
    }
  }

  // ===== Корзина =====
  function updateCartCount() {
    const cart = JSON.parse(localStorage.getItem('cart') || '{}');
    const total = Object.values(cart).reduce((sum, qty) => sum + qty, 0);
    document.getElementById('cart-count').textContent = total;
  }

  function addToCart(itemId) {
    const cart = JSON.parse(localStorage.getItem('cart') || '{}');
    cart[itemId] = (cart[itemId] || 0) + 1;
    localStorage.setItem('cart', JSON.stringify(cart));
    updateCartCount();
  }

  updateCartCount();
  loadPaintings();
</script>

</body>
</html>